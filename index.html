<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="reset.css">
    <title>Aula 1 - DOM</title>
</head>
<body class="body">
    <main class="main-content">
        <h1 class="main-title">Calculadora</h1>
        <p class="main-paragraph">Para realizar uma operação insira o primeiro número e clique no operador desejado, após repita o processo.</p>
        <form class="main-form"action="" method="get">
            <div class="input-div">
                <input type="text" id="equals" placeholder="Ex: 3">
                <div id="total">
                        <span class="main-span">
                            0
                        </span> 
                </div>
            </div>
            <div id="operators-division">
                <button class="operator-buttons --blue" type="button" onclick="clearTotal()">CE</button>
                <button class="operator-buttons" type="button" onclick="calculate('+')">+</button>
                <button class="operator-buttons" type="button" onclick="calculate('-')">-</button> 
                <button class="operator-buttons" type="button" onclick="calculate('*')">X</button>
                <button class="operator-buttons" type="button" onclick="calculate('/')">÷</button> 
            </div> 
            <button class="history-button" onclick="showHistory()" type="button">Histórico</button>           
        </form>
        <section class="history">
                <h2 class="history-title">Histórico de Operações:</h2>
        </section>
    </main>
    <script>
 const number =  document.querySelector("input[id='equals']");
 const form = document.querySelector("form")
 const total = document.querySelector("span");
 const history = document.createElement("ul");
 const historyDiv = document.querySelector("section");
 let firstNumber;      
 function calculate(operator) {
     if (operator === "+") {
        firstNumber = total.innerText
        total.textContent = parseInt(total.innerText) + parseInt(number.value)
         storeOperations(operator);
         form.reset()
     }
     if (operator === "-") {
        firstNumber = total.innerText
         total.textContent = parseInt(total.innerText) - parseInt(number.value)
         storeOperations(operator);
         form.reset()
     }
     if (operator === "*") {
        firstNumber = total.innerText
         total.textContent = parseInt(total.innerText) * parseInt(number.value)
         storeOperations(operator);
         form.reset()
     }
     if (operator === "/") {
        firstNumber = total.innerText
         total.textContent = parseInt(total.innerText) / parseInt(number.value);
         storeOperations(operator);
         form.reset()
     }
 }
 function clearTotal() {
    total.textContent = 0;
}
function showHistory() {
    historyDiv.appendChild(history)
}

function storeOperations(operator) {
    let operations = [];
    operations = [...operations, `${firstNumber} ${operator} ${number.value} = ${total.textContent}`];
    for (const element of operations) {
        history.innerHTML += `<li class="operation-stored"> ${element} </li>`;
    }
}
    </script>
</body>
</html>